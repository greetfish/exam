(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91c60404"],{"0bfb":function(e,t,a){"use strict";var s=a("cb7c");e.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(e,t,a){"use strict";a("3846");var s=a("cb7c"),l=a("0bfb"),o=a("9e1e"),i="toString",r=/./[i],n=function(e){a("2aba")(RegExp.prototype,i,e,!0)};a("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?n(function(){var e=s(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?l.call(e):void 0)}):r.name!=i&&n(function(){return r.call(this)})},"6f60":function(e,t,a){},b0cc:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"paperGenerate"},[a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("h3",[e._v("请补全试卷生成的必要信息")]),a("el-divider")],1)],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,offset:3,clearable:!0,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("试卷名：")])]),a("el-col",{attrs:{span:14,align:"left"}},[a("el-input",{attrs:{size:"medium",placeholder:"输入即将生成的试卷名称"},model:{value:e.paper.paperName,callback:function(t){e.$set(e.paper,"paperName",t)},expression:"paper.paperName"}})],1)],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,offset:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("考核科目：")])]),a("el-col",{attrs:{span:14,align:"left"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择考核的科目"},on:{change:e.courseChange},model:{value:e.paper.courseId,callback:function(t){e.$set(e.paper,"courseId",t)},expression:"paper.courseId"}},e._l(e.courseList,function(t){return a("el-option",{key:t.value,attrs:{label:t.courseName,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.courseName))]),a("span",{staticClass:"spanInSelect"},[e._v("简答"+e._s(t.countQuestion_D)+"道")]),a("span",{staticClass:"spanInSelect"},[e._v("判断"+e._s(t.countQuestion_C)+"道")]),a("span",{staticClass:"spanInSelect"},[e._v("多选"+e._s(t.countQuestion_B)+"道")]),a("span",{staticClass:"spanInSelect"},[e._v("单选"+e._s(t.countQuestion_A)+"道")])])}),1)],1)],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,offset:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("考试时长：")])]),a("el-col",{attrs:{span:2,align:"left"}},[a("el-input",{attrs:{clearable:!0,size:"medium",placeholder:"分钟"},model:{value:e.paper.timeLimit,callback:function(t){e.$set(e.paper,"timeLimit",t)},expression:"paper.timeLimit"}})],1),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:2,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("总分：")])]),a("el-col",{attrs:{span:2,align:"left"}},[a("el-input",{attrs:{clearable:!0,size:"medium",placeholder:"输入整数"},model:{value:e.paper.score,callback:function(t){e.$set(e.paper,"score",t)},expression:"paper.score"}})],1),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("允许超时：")])]),a("el-col",{staticClass:"switchCol",attrs:{span:1,align:"right"}},[a("el-switch",{model:{value:e.paper.allowTimeOut,callback:function(t){e.$set(e.paper,"allowTimeOut",t)},expression:"paper.allowTimeOut"}})],1),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("随机抽题：")])]),a("el-col",{staticClass:"switchCol",attrs:{span:1,align:"right"}},[a("el-switch",{model:{value:e.paper.atRandom,callback:function(t){e.$set(e.paper,"atRandom",t)},expression:"paper.atRandom"}})],1)],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,offset:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("参加人员：")])]),a("el-col",{attrs:{span:10,align:"left"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"从列表中选择人员分组"},model:{value:e.paper.memberGroupId,callback:function(t){e.$set(e.paper,"memberGroupId",t)},expression:"paper.memberGroupId"}},e._l(e.memberGroupList,function(t){return a("el-option",{key:t.id,attrs:{label:t.groupName,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.groupName))]),a("span",{staticClass:"spanInSelect"},[e._v("共"+e._s(t.countMember)+"人")])])}),1)],1),a("el-col",{attrs:{span:4,align:"right"}},[a("el-button",{attrs:{size:"mudium"},on:{click:function(t){return e.memberEditDialogOpen()}}},[e._v("人员编辑")])],1)],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:3,offset:3,align:"right"}},[a("a",{staticClass:"inputDescription"},[e._v("组卷策略：")])]),a("el-col",{staticClass:"courseTable",attrs:{span:10,align:"left"}},[a("table",{staticClass:"generateTable"},[a("tr",[a("th",{staticClass:"generateTableTd",staticStyle:{width:"80px"}},[e._v("题  型")]),a("th",{staticClass:"generateTableTd"},[e._v("单选题")]),a("th",{staticClass:"generateTableTd"},[e._v("多选题")]),a("th",{staticClass:"generateTableTd"},[e._v("判断题")]),a("th",{staticClass:"generateTableTd"},[e._v("简答题")])]),a("tr",{attrs:{align:"center"}},[a("td",{staticClass:"generateTableTd"},[e._v("现有题量")]),a("td",{staticClass:"generateTableTd"},[e._v(e._s(e.course.countQuestion_A))]),a("td",{staticClass:"generateTableTd"},[e._v(e._s(e.course.countQuestion_B))]),a("td",{staticClass:"generateTableTd"},[e._v(e._s(e.course.countQuestion_C))]),a("td",{staticClass:"generateTableTd"},[e._v(e._s(e.course.countQuestion_D))])]),a("tr",{attrs:{align:"center"}},[a("td",{staticClass:"generateTableTd"},[e._v("组卷题量")]),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditA,type:"number",size:"medium",placeholder:"整数"},on:{change:e.generateTableChange},model:{value:e.paper.countQuestionTypeA,callback:function(t){e.$set(e.paper,"countQuestionTypeA",t)},expression:"paper.countQuestionTypeA"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditB,type:"number",size:"medium",placeholder:"整数"},on:{change:e.generateTableChange},model:{value:e.paper.countQuestionTypeB,callback:function(t){e.$set(e.paper,"countQuestionTypeB",t)},expression:"paper.countQuestionTypeB"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditC,type:"number",size:"medium",placeholder:"整数"},on:{change:e.generateTableChange},model:{value:e.paper.countQuestionTypeC,callback:function(t){e.$set(e.paper,"countQuestionTypeC",t)},expression:"paper.countQuestionTypeC"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditD,type:"number",size:"medium",placeholder:"整数"},on:{change:e.generateTableChange},model:{value:e.paper.countQuestionTypeD,callback:function(t){e.$set(e.paper,"countQuestionTypeD",t)},expression:"paper.countQuestionTypeD"}})],1)]),a("tr",{attrs:{align:"center"}},[a("td",{staticClass:"generateTableTd"},[e._v("每题分值")]),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditA,size:"medium",placeholder:"分值"},on:{change:e.generateTableChange},model:{value:e.paper.scoreQuestionTypeA,callback:function(t){e.$set(e.paper,"scoreQuestionTypeA",t)},expression:"paper.scoreQuestionTypeA"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditB,size:"medium",placeholder:"分值"},on:{change:e.generateTableChange},model:{value:e.paper.scoreQuestionTypeB,callback:function(t){e.$set(e.paper,"scoreQuestionTypeB",t)},expression:"paper.scoreQuestionTypeB"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditC,size:"medium",placeholder:"分值"},on:{change:e.generateTableChange},model:{value:e.paper.scoreQuestionTypeC,callback:function(t){e.$set(e.paper,"scoreQuestionTypeC",t)},expression:"paper.scoreQuestionTypeC"}})],1),a("td",{staticClass:"generateTableTd"},[a("el-input",{attrs:{disabled:e.allowEditD,size:"medium",placeholder:"分值"},on:{change:e.generateTableChange},model:{value:e.paper.scoreQuestionTypeD,callback:function(t){e.$set(e.paper,"scoreQuestionTypeD",t)},expression:"paper.scoreQuestionTypeD"}})],1)])])]),a("el-col",{staticStyle:{"padding-top":"116px"},attrs:{span:4,align:"right"}},[a("el-alert",{attrs:{"show-icon":"",center:"",type:e.alertType,closable:!1}},[a("a",{staticStyle:{"font-size":"16px"}},[e._v("总分："+e._s(e.selectedScore))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("el-divider")],1)],1),a("el-row",[a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:4,offset:16,align:"right"}},[a("el-button",{attrs:{size:"mudium",type:"primary"},on:{click:function(t){return e.beginMakePaper()}}},[e._v("生成试卷")])],1)],1),a("el-dialog",{attrs:{title:"人员编辑",visible:e.memberEditDialog},on:{"update:visible":function(t){e.memberEditDialog=t},close:function(t){return e.memberEditDialogClose()}}},[a("el-row",[a("el-divider",{attrs:{"content-position":"left"}},[e._v("从Excel文件导入分组")])],1),a("el-row",[a("el-col",{attrs:{span:8,offset:3,align:"left"}},[a("el-input",{attrs:{clearable:!0,size:"small",placeholder:"设置组名(必填)"},model:{value:e.newMemberGroupName,callback:function(t){e.newMemberGroupName=t},expression:"newMemberGroupName"}})],1),a("el-col",{attrs:{span:10,align:"right"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-success":e.uploadSuccess,data:e.uploadData,"show-file-list":!0,action:"api_uploadMemberGroupFile",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("确认上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请选取Excel文件("),a("a",{attrs:{href:"/新的人员名单.xlsx"}},[e._v("样表下载")]),e._v(")")])],1)],1)],1),a("el-row",[a("el-divider",{attrs:{"content-position":"left"}},[e._v("编辑组内人员")])],1),a("el-row",{staticClass:"inputRow"},[a("el-col",{attrs:{span:15,offset:3,align:"left"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"从列表中选择人员分组"},on:{change:e.memberGroupChanged},model:{value:e.memberGroupIdFromEdit,callback:function(t){e.memberGroupIdFromEdit=t},expression:"memberGroupIdFromEdit"}},e._l(e.memberGroupListForEdit,function(t){return a("el-option",{key:t.id,attrs:{label:t.groupName,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.groupName))])])}),1)],1),a("el-col",{attrs:{span:3,align:"right"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该分组及其所属人员",placement:"bottom"}},[a("el-button",{on:{click:function(t){return e.deleteMemberGroup()}}},[e._v("删除分组")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18,offset:3,align:"left"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.memberList,height:"400",border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"remarks",label:"单位"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"examNumber",label:"考号",align:"center"}}),a("el-table-column",{attrs:{prop:"",label:"",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除该人员及其成绩记录",placement:"left"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(a){return e.memberDelete(t.row)}}})],1)]}}])})],1)],1)],1)],1)],1)},l=[],o=(a("6b54"),a("bc3a")),i=a.n(o),r=a("4328"),n=a.n(r),p={data:function(){return{courseList:[],memberGroupList:[],memberGroupListForEdit:[],memberGroupIdFromEdit:"",memberList:[],fileList:[],course:{},selectedScore:"0",allowEditA:!0,allowEditB:!0,allowEditC:!0,allowEditD:!0,alertType:"info",newMemberGroupName:"",memberEditDialog:!1,paper:{paperName:"",courseId:"",memberGroupId:"",score:"100",timeLimit:"60",countQuestionTypeA:"0",countQuestionTypeB:"0",countQuestionTypeC:"0",countQuestionTypeD:"0",scoreQuestionTypeA:"0",scoreQuestionTypeB:"0",scoreQuestionTypeC:"0",scoreQuestionTypeD:"0",allowTimeOut:!1,atRandom:!0}}},created:function(){this.getAllCourse(),this.getAllMemberGroup(),this.getAllMemberGroupForEdit()},computed:{uploadData:function(){return{memberGroupName:this.newMemberGroupName}}},methods:{getAllCourse:function(){var e=this;i.a.get("/api_getAllCourse").then(function(t){e.courseList=t.data})},getAllMemberGroup:function(){var e=this;i.a.get("/api_getAllMemberGroup").then(function(t){e.memberGroupList=t.data})},getAllMemberGroupForEdit:function(){var e=this;i.a.get("/api_getAllMemberGroup").then(function(t){e.memberGroupListForEdit=t.data})},memberGroupChanged:function(){var e=this;i.a.post("/api_getAllMemberByMemberGroupId",n.a.stringify({memberGroupId:e.memberGroupIdFromEdit})).then(function(t){e.memberList=t.data})},courseChange:function(){var e=this;i.a.post("/api_getCourseById",n.a.stringify({courseId:e.paper.courseId})).then(function(t){e.course=t.data,0===e.course.countQuestion_A?e.allowEditA=!0:e.allowEditA=!1,0===e.course.countQuestion_B?e.allowEditB=!0:e.allowEditB=!1,0===e.course.countQuestion_C?e.allowEditC=!0:e.allowEditC=!1,0===e.course.countQuestion_D?e.allowEditD=!0:e.allowEditD=!1})},beginMakePaper:function(){var e=this;e.selectedScore.toString()===e.paper.score&""!==e.paper.paperName&""!==e.paper.courseId&""!==e.paper.memberGroupId?i.a.post("/api_newPaper",n.a.stringify(e.paper)).then(function(t){0===t.data.msgType?e.showSuccessMsg(t.data.msgContent+"————请前往考试控制中查看试卷"):1===t.data.msgType&&e.showErrorMsg(t.data.msgContent)}):e.showErrorMsg("请将信息填写完整再生成")},generateTableChange:function(){var e=this;e.selectedScore=e.paper.countQuestionTypeA*this.paper.scoreQuestionTypeA+e.paper.countQuestionTypeB*this.paper.scoreQuestionTypeB+e.paper.countQuestionTypeC*this.paper.scoreQuestionTypeC+e.paper.countQuestionTypeD*this.paper.scoreQuestionTypeD,e.selectedScore.toString()===e.paper.score?e.alertType="success":e.alertType="info"},memberEditDialogOpen:function(){this.memberEditDialog=!0},memberEditDialogClose:function(){this.newMemberGroupName=""},deleteMemberGroup:function(){var e=this;i.a.post("/api_deleteMemberGroup",n.a.stringify({memberGroupId:e.memberGroupIdFromEdit})).then(function(t){0===t.data.msgType?(e.showSuccessMsg(t.data.msgContent),e.getAllMemberGroup()):1===t.data.msgType&&e.showErrorMsg(t.data.msgContent)})},memberDelete:function(e){var t=this;i.a.post("/api_memberDelete",n.a.stringify({memberId:e.id})).then(function(e){t.memberList=e.data})},handleExceed:function(){console.log("Exceed")},uploadSuccess:function(e,t,a){this.$refs.upload.clearFiles(),this.getAllMemberGroup(),this.getAllMemberGroupForEdit(),0===e.msgType?this.showSuccessMsg(e.msgContent):1===e.msgType&&this.showErrorMsg(e.msgContent)},submitUpload:function(){this.$refs.upload.submit()},showSuccessMsg:function(e){this.$message({message:e,type:"success"})},showErrorMsg:function(e){this.$message({message:e,type:"error"})}}},c=p,u=(a("f45e"),a("2877")),d=Object(u["a"])(c,s,l,!1,null,null,null);t["default"]=d.exports},f45e:function(e,t,a){"use strict";var s=a("6f60"),l=a.n(s);l.a}}]);
//# sourceMappingURL=chunk-91c60404.03148342.js.map